<html>

<head>
  <title>Message App</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css">
  <style>
    .slide-fade-enter-active, .slide-fade-leave-active {
      transition: all 1s ease;
    }
    .slide-fade-enter, .slide-fade-leave-to {
      height: 0px;
      overflow-y: hidden;
      opacity: 0;
    }
    .logo {
      max-width: 48px;
      margin-right: 12px;
    }
  </style>
</head>

<body>
  <p>&nbsp;</p>
  <div id="app" class="container">
    <h3>
      <img src="assets/img/messages.jpg" width="100"/>
      Messages App
    </h3>

    <div>
      <table>
        <tr>
          <td>
            <form [formGroup]="messageForm" (ngSubmit)="onSubmit()">
                <label for="message">
                  Message: &nbsp;&nbsp;
                </label>
                <input id="message" type="text" formControlName="message">
                &nbsp;&nbsp;
                <button class="button" type="submit">Add</button>
                &nbsp;&nbsp;
            </form>                      
          </td>
          <td style="width: 259px; vertical-align: top;">
            <button (click)="onRefresh()">Refresh</button>
          </td>
        </tr>
      </table>
    </div>
    
    <div>
      <ngx-datatable class="bootstrap" [rows]="messages">
        
        <ngx-datatable-column prop="userId" name="User">
          <ng-template let-value="value" ngx-datatable-cell-template>
            <div>{{ value }}</div>
          </ng-template>
        </ngx-datatable-column>

        <ngx-datatable-column prop="message" name="Text">
          <ng-template let-value="value" ngx-datatable-cell-template>
            <div>{{ value }}</div>
          </ng-template>
        </ngx-datatable-column>

        <ngx-datatable-column prop="date" name="Date">
          <ng-template let-value="value" ngx-datatable-cell-template>
            <div>{{ value }}</div>
          </ng-template>
        </ngx-datatable-column>

        <ngx-datatable-column prop="msgId" name="">
          <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
            <div *ngIf="row.userId == activeUser">
              <button (click)='onDelete(value)'>Delete</button>
            </div>  
          </ng-template>
        </ngx-datatable-column>

        <ngx-datatable-column prop="msgId" name="">
          <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
            <div *ngIf="row.userId == activeUser">
              <button (click)='onUpdate(value)'>Update</button>
            </div>  
          </ng-template>
        </ngx-datatable-column>

      </ngx-datatable>
    </div>
  </div>
</body>

</html>